		/**
		 * The doubleclick event handler method.
		 * @param	e	The <code>MouseEvent</code> that represents this doubleclick event.
		 */
		public void mouseDoubleClick(MouseEvent e) 
		{
			LogManager.logDebug("Start mouseDoubleClick: e-" + e, this);
			getSite().getShell().setCursor(new Cursor(getSite().getShell().getDisplay(), SWT.CURSOR_WAIT));
			int lineno = getVerticalRuler().getLineOfLastMouseButtonActivity();

			String s = getSourceViewer().getDocument().get();
			String[] lines = s.split("\n");
			String line = lines[lineno].trim();
			boolean die = false;
			if("".equals(line))		//eat blank lines
			   die = true;
			if(line.startsWith("#"))	//eat preprocessor directives
				die = true;
			if(line.startsWith("//"))	//eat C99 comments
				die = true;
			if(line.startsWith("/*") && !line.contains("*/") && !line.endsWith("*/"))	//try to eat single-line C comments
				die = true;
			
			//gogo find comment segments
			try
			{
				ArrayList<Integer> commentChunks = new ArrayList<Integer>();
				char[] chars = s.toCharArray();
				int needle = 1;
				int offset = getSourceViewer().getDocument().getLineOffset(lineno);
				while (needle < chars.length)
				{
					if(chars[needle-1] == '/' && chars[needle] == '*')
					{
						commentChunks.add(new Integer(needle));
						while(needle < chars.length)
						{
							if(chars[needle-1] == '*' && chars[needle] == '/')
							{
								commentChunks.add(new Integer(needle));
								needle++;
								break;
							}
							needle++;
						}
					}
					needle++;
				}
				for(int i=0, pair, start, end; i < commentChunks.size(); i++)
				{
					if(!(((Integer)(commentChunks.get(i))).intValue() < offset))
					{
						pair = i - i%2;
						start = ((Integer)(commentChunks.get(pair))).intValue();
						end = ((Integer)(commentChunks.get(pair+1))).intValue();
						if(offset >= start && offset <= end)
							die=true;
					}
				}
			} catch (Exception excp) {
				LogManager.logCritical("Exception mouseDoubleClick: " + excp.getMessage(), this);
			}
			if(die) {
				LogManager.logInfo("Initializing", MessageDialog.class);
				MessageDialog.openError(PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell(),
						Localization.getString("CEditor.ProbeInsertFailed"),Localization.getString("CEditor.CanNotProbeLine"));
				LogManager.logInfo("Disposing", MessageDialog.class);
			} else {
				IEditorInput in = getEditorInput();
				if(in instanceof PathEditorInput) {
					PathEditorInput input = (PathEditorInput)in;
	
					IPreferenceStore p = IDEPlugin.getDefault().getPreferenceStore();
					String kernroot = p.getString(IDEPreferenceConstants.P_KERNEL_SOURCE);
	
					String filepath = input.getPath().toOSString();
					String kernrelative = filepath.substring(kernroot.length()+1, filepath.length());
					StringBuffer sb = new StringBuffer();
					
					sb.append("probe kernel.statement(\"*@"+ kernrelative + ":" + (lineno+1) + "\")");

				/*	if(!checkProbe(sb.toString() + "{ }")) {
						LogManager.logInfo("Initializing", MessageDialog.class);
						MessageDialog.openError(PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell(),
								Localization.getString("CEditor.ProbeInsertFailed"),Localization.getString("CEditor.CanNotProbeLine"));
						LogManager.logInfo("Disposing", MessageDialog.class);
					} else { */
						sb.append("\n{\n\t\n}\n");
						if(null == IDESessionSettings.activeSTPEditor) {
							NewFileAction action = new NewFileAction();
							//action.init(input.getMainWindow());
							action.run();
							IEditorPart ed = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getActiveEditor();
							if(ed instanceof STPEditor)
								IDESessionSettings.activeSTPEditor = (STPEditor)ed;
						}
						STPEditor editor = IDESessionSettings.activeSTPEditor;
						if(null != editor)
							editor.insertText(sb.toString());
					//}
				}
			}
			getSite().getShell().setCursor(null);	//Return the cursor to normal
			LogManager.logDebug("End mouseDoubleClick:", this);
		}

